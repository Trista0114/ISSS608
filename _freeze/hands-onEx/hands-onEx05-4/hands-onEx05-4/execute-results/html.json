{
  "hash": "be8c7239645fd6ad96379cd32ec6c733",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Hands on Exercise 05-4: Visual Multivariate Analysis with Parallel Coordinates Plot\"\nauthor: \"Chen.PengWei\"\ndate-modified: \"last-modified\"\nexecute:\n  echo: true\n  eval: true\n  warning: false\n  freeze: true\n---\n\n\n\n# 1. Overview\n\n# 2. Getting Started\n\n::: panel-tabset\n## Installing Libraries\n\nFor this exercise, the **GGally**, **parcoords**, **parallelPlot** and **tidyverse** packages will be used.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(GGally, parallelPlot, tidyverse)\n```\n:::\n\n\n\n## Importing Data\n\nn this hands-on exercise, the World Happinees 2018 (http://worldhappiness.report/ed/2018/) data will be used. The data set is download at https://s3.amazonaws.com/happiness-report/2018/WHR2018Chapter2OnlineData.xls. The original data set is in Microsoft Excel format. It has been extracted and saved in csv file called **WHData-2018.csv**.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwh <- read_csv(\"data/WHData-2018.csv\")\n```\n:::\n\n\n\n## Understanding Data\n\nThe data set consists of 12 variables, with 2 catogory variable (Counrty and Regoin) and others 10 numeric variables.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(wh,10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 10 × 12\n   Country        Region `Happiness score` `Whisker-high` `Whisker-low` Dystopia\n   <chr>          <chr>              <dbl>          <dbl>         <dbl>    <dbl>\n 1 Albania        Centr…              4.59           4.70          4.48     1.46\n 2 Bosnia and He… Centr…              5.13           5.22          5.04     1.88\n 3 Bulgaria       Centr…              4.93           5.02          4.84     1.22\n 4 Croatia        Centr…              5.32           5.40          5.24     1.77\n 5 Czech Republic Centr…              6.71           6.78          6.64     2.49\n 6 Estonia        Centr…              5.74           5.82          5.66     1.46\n 7 Hungary        Centr…              5.62           5.70          5.54     1.97\n 8 Kosovo         Centr…              5.66           5.76          5.57     2.26\n 9 Latvia         Centr…              5.93           6.00          5.86     2.14\n10 Lithuania      Centr…              5.95           6.04          5.87     2.13\n# ℹ 6 more variables: `GDP per capita` <dbl>, `Social support` <dbl>,\n#   `Healthy life expectancy` <dbl>, `Freedom to make life choices` <dbl>,\n#   Generosity <dbl>, `Perceptions of corruption` <dbl>\n```\n\n\n:::\n:::\n\n\n:::\n\n# 3. Plotting Static Parallel Coordinates Plot\n\nIn this section, you will learn how to plot static parallel coordinates plot by using [`ggparcoord()`](https://ggobi.github.io/ggally/reference/ggparcoord.html) of **GGally** package. Before getting started, it is a good practice to read the function description in detail.\n\n## 3.1 Plotting a simple parallel coordinates\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggparcoord(data = wh, \n           columns = c(7:12))\n```\n\n::: {.cell-output-display}\n![](hands-onEx05-4_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\nNotice that only two argument namely `data` and `columns` is used. `Data` argument is used to map the data object (i.e. *wh*) and `columns` is used to select the columns for preparing the parallel coordinates plot.\n\n## 3.2 Plotting a parallel coordinates with boxplot\n\nThe basic parallel coordinates failed to reveal any meaning understanding of the World Happiness measures. In this section, you will learn how to makeover the plot by using a collection of arguments provided by `ggparcoord()`.\n\n✅ ggparcoord() is suitable for multidimensional data visualization and can quickly compare patterns between different variables. \\\n✅ Use uniminmax standardization to make data more comparable and not affected by different scales.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggparcoord(data = wh, \n           columns = c(7:12), \n           groupColumn = 2,\n           scale = \"uniminmax\",\n           alphaLines = 0.2,\n           boxplot = TRUE, \n           title = \"Parallel Coordinates Plot of World Happines Variables\")\n```\n\n::: {.cell-output-display}\n![](hands-onEx05-4_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n::: callout-tip\n## Things to learn form code\n\n-   groupColumn = 2:\n\n    -   Specify a grouping variable (column 2: Region), to color different categories, also colour the parallel coordinates lines by region name.\n\n-   scale = \"uniminmax\"\n\n    -   Standardization method: scale the data to the \\[0,1\\] interval to make variables of different scales more comparable\n\n-   alphaLines = 0.2\n\n    -   Set line transparency (0.2) to reduce the impact of overlapping lines and make trends clearer.\n\n-   boxplot = TRUE\n\n    -   Add a boxplot at the bottom of the graph to show the distribution of each variable and help identify outliers and data ranges.\n:::\n\n## 3.3 Parallel coordinates with facet\n\nIn the code chunk below, `facet_wrap()` of **ggplot2** is used to plot 10 small multiple parallel coordinates plots. Each plot represent one geographical region such as East Asia.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggparcoord(data = wh, \n           columns = c(7:12), \n           groupColumn = 2,\n           scale = \"uniminmax\",\n           alphaLines = 0.2,\n           boxplot = TRUE, \n           title = \"Multiple Parallel Coordinates Plots of World Happines Variables by Region\") +\n  facet_wrap(~ Region)\n```\n\n::: {.cell-output-display}\n![](hands-onEx05-4_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n\nOne of the aesthetic defect of the current design is that some of the variable names overlap on x-axis.\n\n## 3.4 Adjusting x-axis text label : `theme()`\n\nTo make the x-axis text label easy to read, let us rotate the labels by 30 degrees. We can rotate axis text labels using `theme()` function. Additionally, in order to avoid the labels overlap the plot, you can use `hjust` to adjust the label location.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggparcoord(data = wh, \n           columns = c(7:12), \n           groupColumn = 2,\n           scale = \"uniminmax\",\n           alphaLines = 0.2,\n           boxplot = TRUE, \n           title = \"Multiple Parallel Coordinates Plots of World Happines Variables by Region\") +\n  facet_wrap(~ Region) + \n  theme(axis.text.x = element_text(angle = 30,hjust=1))\n```\n\n::: {.cell-output-display}\n![](hands-onEx05-4_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n\n-   To rotate x-axis text labels, we use `axis.text.x` as argument to `theme()` function. And we specify `element_text(angle = 30)` to rotate the x-axis text by an angle 30 degree.\n",
    "supporting": [
      "hands-onEx05-4_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}